<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ETå®˜ç½‘ - IPçŠ¶æ€</title>
    <meta http-equiv="refresh" content="30"> <!-- æ¯30ç§’è‡ªåŠ¨åˆ·æ–° -->
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        #ip-box { 
            background: #f5f5f5; 
            padding: 20px; 
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #4CAF50;
        }
        #ip-value { 
            font-size: 24px; 
            color: #2196F3;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>ETå®˜ç½‘ - IPçŠ¶æ€ç›‘æ§</h1>
    <p>å®˜ç½‘ç‰ˆæœ¬ï¼šbata0.1</p>
    <hr>
    
    <h2>ğŸ“± è®¾å¤‡ä¸ŠæŠ¥çš„IPåœ°å€</h2>
    
    <div id="ip-box">
        <p id="ip-display">æ­£åœ¨åŠ è½½IPä¿¡æ¯...</p>
        <p id="ip-value">-</p>
        <p id="update-time">-</p>
    </div>
    
    <button onclick="refreshIP()">ğŸ”„ åˆ·æ–°æ˜¾ç¤º</button>
    <button onclick="clearStorage()">ğŸ—‘ï¸ æ¸…é™¤æ•°æ®</button>
    
    <hr>
    <p><small>IPä¿¡æ¯ç”±è®¾å¤‡è‡ªåŠ¨ä¸ŠæŠ¥ï¼Œæ¯10åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡ã€‚</small></p>
    
    <script>
        // æ˜¾ç¤ºIPä¿¡æ¯
        function displayIP() {
            const ip = localStorage.getItem('ettd_ip');
            const label = localStorage.getItem('ettd_label') || 'æœåŠ¡å™¨å½“å‰IPä¸ºï¼š';
            const time = localStorage.getItem('ettd_time');
            
            if (ip) {
                document.getElementById('ip-display').textContent = label;
                document.getElementById('ip-value').textContent = ip;
                document.getElementById('update-time').textContent = `æ›´æ–°æ—¶é—´ï¼š${time}`;
                console.log('æ˜¾ç¤ºçš„IP:', ip);
            } else {
                document.getElementById('ip-value').textContent = 'ç­‰å¾…è®¾å¤‡ä¸ŠæŠ¥IP...';
            }
        }
        
        // åˆ·æ–°æ˜¾ç¤º
        function refreshIP() {
            displayIP();
            alert('å·²åˆ·æ–°ï¼');
        }
        
        // æ¸…é™¤å­˜å‚¨
        function clearStorage() {
            localStorage.clear();
            location.reload();
        }
        
        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºIP
        window.onload = displayIP;
        
        // æ£€æŸ¥æ˜¯å¦æœ‰URLå‚æ•°ï¼ˆç›´æ¥è®¿é—®ipet114514.htmlæ—¶ä¼šè·³è½¬ï¼‰
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('ip')) {
            // å¦‚æœæœ‰IPå‚æ•°ï¼Œè¯´æ˜æ˜¯ç›´æ¥è®¿é—®ï¼Œè·³è½¬åˆ°å¤„ç†é¡µé¢
            window.location.href = 'ipet114514.html' + window.location.search;
        }
    </script>
</body>
</html>
